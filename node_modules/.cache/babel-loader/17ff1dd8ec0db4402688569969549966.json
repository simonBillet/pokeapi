{"ast":null,"code":"import _regeneratorRuntime from\"/Users/simonbillet/Documents/LicencePro/DWJSA/Poke-github/my-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _objectSpread from\"/Users/simonbillet/Documents/LicencePro/DWJSA/Poke-github/my-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _objectWithoutProperties from\"/Users/simonbillet/Documents/LicencePro/DWJSA/Poke-github/my-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";import _asyncToGenerator from\"/Users/simonbillet/Documents/LicencePro/DWJSA/Poke-github/my-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";// A tiny wrapper around fetch(), borrowed from\n// https://kentcdodds.com/blog/replace-axios-with-a-simple-custom-fetch-wrapper\nexport function client(_x){return _client.apply(this,arguments);}function _client(){_client=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(endpoint){var _ref,body,customConfig,headers,config,data,response,_args=arguments;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_ref=_args.length>1&&_args[1]!==undefined?_args[1]:{},body=_ref.body,customConfig=_objectWithoutProperties(_ref,[\"body\"]);headers={'Content-Type':'application/json'};config=_objectSpread(_objectSpread({method:body?'POST':'GET'},customConfig),{},{headers:_objectSpread(_objectSpread({},headers),customConfig.headers)});if(body){config.body=JSON.stringify(body);}_context.prev=4;_context.next=7;return window.fetch(endpoint,config);case 7:response=_context.sent;_context.next=10;return response.json();case 10:data=_context.sent;if(!response.ok){_context.next=13;break;}return _context.abrupt(\"return\",data);case 13:throw new Error(response.statusText);case 16:_context.prev=16;_context.t0=_context[\"catch\"](4);return _context.abrupt(\"return\",Promise.reject(_context.t0.message?_context.t0.message:data));case 19:case\"end\":return _context.stop();}}},_callee,null,[[4,16]]);}));return _client.apply(this,arguments);}client.get=function(endpoint){var customConfig=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};return client(endpoint,_objectSpread(_objectSpread({},customConfig),{},{method:'GET'}));};client.post=function(endpoint,body){var customConfig=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};return client(endpoint,_objectSpread(_objectSpread({},customConfig),{},{body:body}));};","map":{"version":3,"sources":["/Users/simonbillet/Documents/LicencePro/DWJSA/Poke-github/my-app/src/api/client.js"],"names":["client","endpoint","body","customConfig","headers","config","method","JSON","stringify","window","fetch","response","json","data","ok","Error","statusText","Promise","reject","message","get","post"],"mappings":"4uBAAA;AACA;AAEA,eAAsBA,CAAAA,MAAtB,2C,mFAAO,iBAAsBC,QAAtB,6OAA4D,EAA5D,CAAkCC,IAAlC,MAAkCA,IAAlC,CAA2CC,YAA3C,yCACGC,OADH,CACa,CAAE,eAAgB,kBAAlB,CADb,CAGGC,MAHH,8BAICC,MAAM,CAAEJ,IAAI,CAAG,MAAH,CAAY,KAJzB,EAKIC,YALJ,MAMCC,OAAO,gCACAA,OADA,EAEAD,YAAY,CAACC,OAFb,CANR,GAYH,GAAIF,IAAJ,CAAU,CACNG,MAAM,CAACH,IAAP,CAAcK,IAAI,CAACC,SAAL,CAAeN,IAAf,CAAd,CACH,CAdE,sCAkBwBO,CAAAA,MAAM,CAACC,KAAP,CAAaT,QAAb,CAAuBI,MAAvB,CAlBxB,QAkBOM,QAlBP,sCAmBcA,CAAAA,QAAQ,CAACC,IAAT,EAnBd,SAmBCC,IAnBD,mBAoBKF,QAAQ,CAACG,EApBd,0DAqBYD,IArBZ,eAuBO,IAAIE,CAAAA,KAAJ,CAAUJ,QAAQ,CAACK,UAAnB,CAvBP,2FAyBQC,OAAO,CAACC,MAAR,CAAe,YAAIC,OAAJ,CAAc,YAAIA,OAAlB,CAA4BN,IAA3C,CAzBR,uE,yCA6BPb,MAAM,CAACoB,GAAP,CAAa,SAAUnB,QAAV,CAAuC,IAAnBE,CAAAA,YAAmB,2DAAJ,EAAI,CAChD,MAAOH,CAAAA,MAAM,CAACC,QAAD,gCAAgBE,YAAhB,MAA8BG,MAAM,CAAE,KAAtC,GAAb,CACH,CAFD,CAIAN,MAAM,CAACqB,IAAP,CAAc,SAAUpB,QAAV,CAAoBC,IAApB,CAA6C,IAAnBC,CAAAA,YAAmB,2DAAJ,EAAI,CACvD,MAAOH,CAAAA,MAAM,CAACC,QAAD,gCAAgBE,YAAhB,MAA8BD,IAAI,CAAJA,IAA9B,GAAb,CACH,CAFD","sourcesContent":["// A tiny wrapper around fetch(), borrowed from\n// https://kentcdodds.com/blog/replace-axios-with-a-simple-custom-fetch-wrapper\n\nexport async function client(endpoint, { body, ...customConfig } = {}) {\n    const headers = { 'Content-Type': 'application/json' }\n\n    const config = {\n        method: body ? 'POST' : 'GET',\n        ...customConfig,\n        headers: {\n            ...headers,\n            ...customConfig.headers,\n        },\n    }\n\n    if (body) {\n        config.body = JSON.stringify(body)\n    }\n\n    let data\n    try {\n        const response = await window.fetch(endpoint, config)\n        data = await response.json()\n        if (response.ok) {\n            return data\n        }\n        throw new Error(response.statusText)\n    } catch (err) {\n        return Promise.reject(err.message ? err.message : data)\n    }\n}\n\nclient.get = function (endpoint, customConfig = {}) {\n    return client(endpoint, { ...customConfig, method: 'GET' })\n}\n\nclient.post = function (endpoint, body, customConfig = {}) {\n    return client(endpoint, { ...customConfig, body })\n}\n"]},"metadata":{},"sourceType":"module"}